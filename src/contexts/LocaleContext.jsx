import React, { createContext, useContext, useState, useMemo } from 'react';

// Move the full translations object here from Admin.jsx
const translations = {
  en: {
    adminDashboard: 'Admin Dashboard',
    todaysSales: "Today's Sales",
    totalRevenue: 'Total Revenue',
    inventoryValue: 'Inventory Value',
    addProduct: 'Add Product',
    backupNow: 'Backup Now',
    settings: 'Settings',
    products: 'Products',
    name: 'Name',
    barcode: 'Barcode',
    price: 'Price',
    stock: 'Stock',
    quantity: 'Quantity',
    ram: 'RAM',
    storage: 'Storage',
    model: 'Model',
    sellingPrice: 'Selling Price',
    buyingPrice: 'Buying Price',
    action: 'Action',
    edit: 'Edit',
    deleteProduct: 'Delete',
    salesHistory: 'Sales History',
    date: 'Date',
    total: 'Total',
    view: 'View',
    addProductTitle: 'Add Product',
    close: 'Close',
    backupNowTitle: 'Backup Now',
    settingsTitle: 'Settings',
    changeAdminPassword: 'Change Admin Password',
    changePassword: 'Change Password',
    currentPassword: 'Current Password',
    newPassword: 'New Password',
    confirmNewPassword: 'Confirm New Password',
    current: 'Current',
    new: 'New',
    confirm: 'Confirm',
    change: 'Change',
    theme: 'Theme',
    light: 'Light',
    dark: 'Dark',
    system: 'System',
    shopInfo: 'Shop Info',
    shopName: 'Shop Name',
    address: 'Address',
    contact: 'Contact',
    save: 'Save',
    backupRestore: 'Backup & Restore',
    restore: 'Restore',
    autoBackup: 'Auto-backup daily',
    googleDriveStatus: 'Google Drive status',
    connected: 'Connected',
    exportData: 'Export Data',
    exportSales: 'Export Sales (CSV)',
    exportInventory: 'Export Inventory (CSV)',
    lowStockAlerts: 'Low Stock Alerts',
    enableNotifications: 'Enable notifications',
    threshold: 'Threshold (e.g. 5)',
    printerSettings: 'Printer Settings',
    testPrint: 'Test Print',
    receiptFormat: '(Receipt format, printer selection, etc.)',
    dangerZone: 'Danger Zone',
    resetAllData: 'Reset All Data',
    eraseWarning: 'This will erase all sales and inventory data. Action is irreversible!',
    aboutSupport: 'About & Support',
    appVersion: 'POS Version 1.0.0',
    contactSupport: 'Contact Support',
    license: 'MIT License',
    language: 'Language',
    english: 'English',
    kurdish: 'Kurdish (Sorani)',
    arabic: 'Arabic',
    // Add extra keys for CRUD feedback
    productAdded: 'Product added:',
    productUpdated: 'Product updated:',
    productDeleted: 'Product deleted:',
    productArchived: 'Product archived:',
    addedToCart: 'Added to cart:',
    confirmDelete: 'Are you sure you want to delete this product?',
    confirmReset: 'Are you sure you want to reset all data? This cannot be undone!',
    search: 'Search...',
    cashier: 'Cashier',
    scanOrEnter: 'Scan or enter barcode',
    add: 'Add',
    checkPrice: 'Check Price',
    returnItem: 'Return Item',
    noItems: 'No items scanned',
    items: 'items',
    adminAccess: 'Admin Access',
    adminPassword: 'Admin password',
    login: 'Login',
    cancel: 'Cancel',
    receiptPreview: 'Receipt Preview',
    productNotFound: 'Product not found',
    completeSale: 'Complete Sale',
    confirmSale: 'Are you sure you want to complete this sale?',
    confirmDebtSale: 'Are you sure you want to record this sale as debt?',
    saleSuccess: 'Sale completed successfully!',
    saleFailed: 'Sale failed',
    debtSaleSuccess: 'Debt sale recorded successfully!',
    saleApiUnavailable: 'Sale API not available',
    belowBuyingPrice: 'Below buying price!',
    debts: 'Debts',
    totalProfit: 'Total Profit',
    profit: 'Profit',
    searchCustomer: 'Search by customer name...',
    noDebtsFound: 'No debts found for this search',
    markAsPaid: 'Mark as Paid',
    paidAt: 'Paid at',
    paymentTime: 'Payment Time',
    paymentTimeHelp: 'Leave empty to use current time',
    confirmMarkPaid: 'Mark this purchase as paid? This cannot be undone.',
    debtMarkedPaid: 'Debt marked as paid and moved to sales history!',
    // Backup translations
    backupManager: 'Backup Manager',
    manualBackup: 'Manual Backup',
    manualBackupDesc: 'Create a backup of your database to Documents/Phone Shop Backups folder',
    autoBackupSystem: 'Auto Backup',
    autoBackupDesc: 'Automatically backup your database every 24 hours',
    enableAutoBackup: 'Enable automatic daily backup',
    createBackup: 'Create Backup',
    creating: 'Creating...',
    backupSuccess: 'Backup created successfully!',
    backupFailed: 'Backup failed',
    autoBackupSystemEnabled: 'Auto backup enabled - Database will be backed up every 24 hours',
    autoBackupSystemDisabled: 'Auto backup disabled',
    autoBackupFailed: 'Failed to toggle auto backup',
    autoBackupActive: 'Auto backup is active. Next backup will be created in approximately 24 hours.',
    restoreBackup: 'Restore from Backup',
    restoreWarning: 'Warning: Restoring from a backup will replace all current data. This action cannot be undone.',
    selectBackupFile: 'Select Backup File',
    restoring: 'Restoring...',
    confirmRestore: 'Are you sure you want to restore from this backup? This will replace all current data!',
    restoreSuccess: 'Database restored successfully!',
    restoreFailed: 'Restore failed',
    backupHistory: 'Backup History',
    noBackups: 'No backups found',
    fileName: 'File Name',
    createdAt: 'Created At',
    type: 'Type',
    status: 'Status',
    completed: 'Completed',
    // Cloud backup translations
    cloudBackupManager: 'Cloud Backup Manager',
    cloudBackupService: 'Cloud Backup Service',
    signInSignUp: 'Sign In / Sign Up',
    signOut: 'Sign Out',
    createAccount: 'Create Account',
    signIn: 'Sign In',
    fullName: 'Full Name',
    email: 'Email',
    password: 'Password',
    confirmPassword: 'Confirm Password',
    needAccount: 'Need an account?',
    alreadyHaveAccount: 'Already have an account?',
    accountCreatedSuccess: 'Account created successfully!',
    loggedInSuccess: 'Logged in successfully!',
    loggedOutSuccess: 'Logged out successfully!',
    passwordsDoNotMatch: 'وشەی نهێنی هاوتا نییە',
    authenticationFailed: 'چوونەژوورەوە سەرکەوتوو نەبوو',
    logoutFailed: 'دەرچوون سەرکەوتوو نەبوو',
    createCloudBackup: 'دروستکردنی پاشەکەوتی ئەواری',
    backupName: 'ناوی پاشەکەوت',
    backupDescription: 'وەسف (هەڵبژاردە)',
    backupDescriptionPlaceholder: 'وەسفێک بۆ ئەم پاشەکەوتە بنووسە...',
    leaveEmptyAutoName: 'بەتاڵی بهێڵە بۆ ناوی خۆکار',
    cloudBackups: 'پاشەکەوتە ئەواریکان',
    noCloudBackups: 'هیچ پاشەکەوتی ئەواریک نەدۆزرایەوە',
    backupVersion: 'وەشان',
    storageUsed: 'بەکارهێنانی بەرگ',
    downloadBackup: 'داگرتن',
    deleteBackup: 'سڕینەوە',
    autoBackupSettings: 'ڕێکخستنی پاشەکەوتی خۆکار',
    enableAutoCloudBackup: 'چالاککردنی پاشەکەوتی ئەواری خۆکار',
    uploadBackupSuccess: 'پاشەکەوت بە سەرکەوتووی بارکرا!',
    uploadBackupFailed: 'بارکردنی پاشەکەوت سەرکەوتوو نەبوو',
    downloadStarted: 'داگرتن دەستپێکرد',
    downloadBackupFailed: 'داگرتنی پاشەکەوت سەرکەوتوو نەبوو',
    deleteBackupSuccess: 'پاشەکەوت بە سەرکەوتووی سڕایەوە',
    deleteBackupFailed: 'سڕینەوەی پاشەکەوت سەرکەوتوو نەبوو',
    deleteBackupConfirm: 'دڵنیایت دەتەوێت ئەم پاشەکەوتە بسڕیتەوە؟',
    cloudAutoBackupEnabled: 'پاشەکەوتی ئەواری خۆکار چالاککرا',
    cloudAutoBackupDisabled: 'پاشەکەوتی ئەواری خۆکار ناچالاککرا',
    autoBackupSettingsFailed: 'نوێکردنەوەی ڕێکخستنی پاشەکەوتی خۆکار سەرکەوتوو نەبوو',
    userNotAuthenticated: 'بەکارهێنەر چوونەژوورەوە نەکردووە',
    accessDenied: 'دەستگەیشتن ڕەتکرایەوە',
    backupFileNotFound: 'فایلی پاشەکەوت نەدۆزرایەوە',
    failedToReadBackup: 'خوێندنەوەی فایلی پاشەکەوت سەرکەوتوو نەبوو',
    backupApiNotAvailable: 'API ی پاشەکەوت بەردەست نییە',
    failedToCreateBackup: 'دروستکردنی پاشەکەوت سەرکەوتوو نەبوو',
    cloudBackupIntro: 'چوونەژوورەوە بکە بۆ پاشەکەوت و گەڕاندنەوەی داتاکەت بە ئاسایش لە ئەواردا',
  },
  ku: {
    adminDashboard: 'پەڕەی بەڕێوەبەر',
    todaysSales: 'فرۆشی ئەمڕۆ',
    totalRevenue: 'کۆی گەورەی داهات',
    inventoryValue: 'نرخی کۆی کاڵا',
    addProduct: 'زیادکردنی کاڵا',
    backupNow: 'پاشەکەوتکردن',
    settings: 'ڕێکخستنەکان',
    products: 'کاڵاکان',
    name: 'ناو',
    barcode: 'بارکۆد',
    price: 'نرخ',
    stock: 'بڕ',
    quantity: 'ژمارە',
    ram: 'یادگە',
    storage: 'گەنجینە',
    model: 'مۆدێل',
    sellingPrice: 'نرخی فرۆشتن',
    buyingPrice: 'نرخی کڕین',
    action: 'کردار',
    edit: 'دەستکاری',
    deleteProduct: 'سڕینەوە',
    salesHistory: 'مێژووی فرۆشتن',
    date: 'ڕێکەوت',
    total: 'کۆی گشتی',
    view: 'بینین',
    addProductTitle: 'زیادکردنی کاڵا',
    close: 'داخستن',
    backupNowTitle: 'پاشەکەوتکردن',
    settingsTitle: 'ڕێکخستنەکان',
    changeAdminPassword: 'گۆڕینی وشەی نهێنی',
    changePassword: 'گۆڕینی وشەی نهێنی',
    currentPassword: 'وشەی نهێنی ئێستا',
    newPassword: 'وشەی نهێنی نوێ',
    confirmNewPassword: 'دووبارە وشەی نهێنی نوێ',
    current: 'هەنووکەیی',
    new: 'نوێ',
    confirm: 'دووبارە',
    change: 'گۆڕین',
    theme: 'ڕووکار',
    light: 'ڕووناک',
    dark: 'تاریک',
    system: 'سیستەم',
    shopInfo: 'زانیاری دوکان',
    shopName: 'ناوی دوکان',
    address: 'ناونیشان',
    contact: 'پەیوەندی',
    save: 'پاشەکەوتکردن',
    backupRestore: 'پاشەکەوت و گەڕاندنەوە',
    restore: 'گەڕاندنەوە',
    autoBackup: 'پاشەکەوتی خۆکار',
    googleDriveStatus: 'دۆخی گووگڵ درایڤ',
    connected: 'پەیوەستکراو',
    exportData: 'هەناردەکردنی داتا',
    exportSales: 'هەناردەی فرۆشتن (CSV)',
    exportInventory: 'هەناردەی کاڵا (CSV)',
    lowStockAlerts: 'ئاگاداری بڕی کەم',
    enableNotifications: 'چالاککردنی ئاگاداری',
    threshold: 'سنوردار (وەک ٥)',
    printerSettings: 'ڕێکخستنی پرینتەر',
    testPrint: 'تاقیکردنەوەی چاپ',
    receiptFormat: '(فۆرمی وەسڵ، هەڵبژاردنی پرینتەر...)',
    dangerZone: 'ناوچەی مەترسیدار',
    resetAllData: 'سڕینەوەی هەموو داتا',
    eraseWarning: 'ئەمە هەموو داتا و کاڵاکانت دەسڕێتەوە. ئەم کردارە گەراندنەوە نییە!',
    aboutSupport: 'دەربارە و یارمەتی',
    appVersion: 'وەشانی POS 1.0.0',
    contactSupport: 'پەیوەندی یارمەتی',
    license: 'MIT License',
    language: 'زمان',
    english: 'ئینگلیزی',
    kurdish: 'کوردی (سۆرانی)',
    arabic: 'عەرەبی',
    // Add extra keys for CRUD feedback
    productAdded: 'زیادکرا:',
    productUpdated: 'نوێکرایەوە:',
    productDeleted: 'سڕایەوە:',
    productArchived: 'ئەرشیفکرا:',
    addedToCart: 'زیادکرا بۆ سەبەتە:',
    confirmDelete: 'دڵنیایت دەتەوێت ئەم کاڵایە بسڕیتەوە؟',
    confirmReset: 'دڵنیایت دەتەوێت هەموو داتاکان بسڕیتەوە؟ ئەمە گەراندنەوە نییە!',
    search: 'گەڕان...',
    cashier: 'کاشێر',
    scanOrEnter: 'بارکۆد بنووسە یان بڵاوە',
    add: 'زیادکردن',
    checkPrice: 'پشکنینی نرخ',
    returnItem: 'گەڕاندنەوەی کاڵا',
    noItems: 'هیچ کاڵایەک نەهاتووە',
    items: 'کاڵا',
    adminAccess: 'دەستگەیشتن بە بەڕێوەبەر',
    adminPassword: 'وشەی نهێنی بەڕێوەبەر',
    login: 'چوونەژوورەوە',
    cancel: 'پاشگەزبوونەوە',
    receiptPreview: 'پیشاندانی وەرگرتن',
    productNotFound: 'کاڵا نەدۆزرایەوە',
    completeSale: 'تەواوکردنی فرۆشتن',
    confirmSale: 'دڵنیایت کە ئەم فرۆشتنە تەواو بکەیت؟',
    confirmDebtSale: 'دڵنیایت دەتەوێت ئەم فرۆشتنە وەک قەرز تۆمار بکەیت؟',
    saleSuccess: 'فرۆشتن بە سەرکەوتووی تەواو بوو!',
    saleFailed: 'فرۆشتن سەرکەوتوو نەبوو',
    debtSaleSuccess: 'فرۆشتن بە قەرز تۆمارکرا!',
    saleApiUnavailable: 'API ی فرۆشتن بەردەست نییە',
    belowBuyingPrice: 'کەمترە لە نرخی کڕین!',
    debts: 'قەرزەکان',
    totalProfit: 'کۆی قازانج',
    profit: 'قازانج',
    searchCustomer: 'گەڕان بە ناوی کریار...',
    noDebtsFound: 'هیچ قەرزێک نەدۆزرایەوە بۆ ئەم گەڕانە',
    markAsPaid: 'نیشانکردن وەک پارەدراو',
    paidAt: 'پارەدرا لە',
    paymentTime: 'کاتی پارەدان',
    paymentTimeHelp: 'بەتاڵی بهێڵە بۆ بەکارهێنانی کاتی ئێستا',
    confirmMarkPaid: 'ئەم کڕینە وەک پارەدراو نیشان بکەیت؟ ئەمە گەراندنەوە نییە.',
    debtMarkedPaid: 'قەرز وەک پارەدراو نیشانکرا و گوازرایەوە بۆ مێژووی فرۆشتن!',
    // Backup translations
    backupManager: 'بەڕێوەبەری پاشەکەوت',
    manualBackup: 'پاشەکەوتی دەستی',
    manualBackupDesc: 'پاشەکەوتێک لە بنکەدراوەکەت بکە بۆ فۆڵدەری بەڵگەکان/Phone Shop Backups',
    autoBackupSystem: 'پاشەکەوتی خۆکار',
    autoBackupDesc: 'بە شێوەیەکی خۆکار هەموو ٢٤ کاتژمێر جارێک پاشەکەوت بکە',
    enableAutoBackup: 'چالاککردنی پاشەکەوتی ڕۆژانە',
    createBackup: 'دروستکردنی پاشەکەوت',
    creating: 'دروستکردن...',
    backupSuccess: 'پاشەکەوت بە سەرکەوتووی دروستکرا!',
    backupFailed: 'پاشەکەوت سەرکەوتوو نەبوو',
    autoBackupSystemEnabled: 'پاشەکەوتی خۆکار چالاککرا - بنکەدراوە هەموو ٢٤ کاتژمێر جارێک پاشەکەوت دەکرێت',
    autoBackupSystemDisabled: 'پاشەکەوتی خۆکار ناچالاککرا',
    autoBackupFailed: 'گۆڕینی پاشەکەوتی خۆکار سەرکەوتوو نەبوو',
    autoBackupActive: 'پاشەکەوتی خۆکار چالاکە. پاشەکەوتی داهاتوو بە نزیکی ٢٤ کاتژمێرەوە دروست دەکرێت.',
    restoreBackup: 'گەڕاندنەوە لە پاشەکەوت',
    restoreWarning: 'ئاگاداری: گەڕاندنەوە لە پاشەکەوت هەموو داتای ئێستا دەگۆڕێت. ئەم کردارە ناگەڕێتەوە.',
    selectBackupFile: 'فایلی پاشەکەوت هەڵبژێرە',
    restoring: 'گەڕاندنەوە...',
    confirmRestore: 'دڵنیایت دەتەوێت لەم پاشەکەوتەوە گەڕاندنەوە بکەیت؟ ئەمە هەموو داتای ئێستا دەگۆڕێت!',
    restoreSuccess: 'بنکەدراوە بە سەرکەوتووی گەڕێندرایەوە!',
    restoreFailed: 'گەڕاندنەوە سەرکەوتوو نەبوو',
    backupHistory: 'مێژووی پاشەکەوت',
    noBackups: 'هیچ پاشەکەوتێک نەدۆزرایەوە',
    fileName: 'ناوی فایل',
    createdAt: 'دروستکراوە لە',
    type: 'جۆر',
    status: 'دۆخ',
    completed: 'تەواوبووە',
    monthlySales: 'فرۆشی مانگانە',
    archivedProducts: 'کاڵای ئەرشیفکراو',
    // Cloud backup translations
    cloudBackupManager: 'بەڕێوەبەری پاشەکەوتی ئەواری',
    cloudBackupService: 'خزمەتی پاشەکەوتی ئەواری',
    signInSignUp: 'چوونەژوورەوە/خۆتۆمارکردن',
    signOut: 'دەرچوون',
    createAccount: 'دروستکردنی هەژمار',
    signIn: 'چوونەژوورەوە',
    fullName: 'ناوی تەواو',
    email: 'ئیمەیڵ',
    password: 'وشەی نهێنی',
    confirmPassword: 'دووبارە وشەی نهێنی',
    needAccount: 'پێویست بە هەژمارە؟',
    alreadyHaveAccount: 'پێشتر هەژمارت هەیە؟',
    accountCreatedSuccess: 'هەژمار بە سەرکەوتووی دروستکرا!',
    loggedInSuccess: 'بە سەرکەوتووی چوویتە ژوورەوە!',
    loggedOutSuccess: 'بە سەرکەوتووی دەرچوویتەوە!',
    passwordsDoNotMatch: 'وشەی نهێنی هاوتا نییە',
    authenticationFailed: 'چوونەژوورەوە سەرکەوتوو نەبوو',
    logoutFailed: 'دەرچوون سەرکەوتوو نەبوو',
    createCloudBackup: 'دروستکردنی پاشەکەوتی ئەواری',
    backupName: 'ناوی پاشەکەوت',
    backupDescription: 'وەسف (هەڵبژاردە)',
    backupDescriptionPlaceholder: 'وەسفێک بۆ ئەم پاشەکەوتە بنووسە...',
    leaveEmptyAutoName: 'بەتاڵی بهێڵە بۆ ناوی خۆکار',
    cloudBackups: 'پاشەکەوتە ئەواریکان',
    noCloudBackups: 'هیچ پاشەکەوتی ئەواریک نەدۆزرایەوە',
    backupVersion: 'وەشان',
    storageUsed: 'بەکارهێنانی بەرگ',
    downloadBackup: 'داگرتن',
    deleteBackup: 'سڕینەوە',
    autoBackupSettings: 'ڕێکخستنی پاشەکەوتی خۆکار',
    enableAutoCloudBackup: 'چالاککردنی پاشەکەوتی ئەواری خۆکار',
    uploadBackupSuccess: 'پاشەکەوت بە سەرکەوتووی بارکرا!',
    uploadBackupFailed: 'بارکردنی پاشەکەوت سەرکەوتوو نەبوو',
    downloadStarted: 'داگرتن دەستپێکرد',
    downloadBackupFailed: 'داگرتنی پاشەکەوت سەرکەوتوو نەبوو',
    deleteBackupSuccess: 'پاشەکەوت بە سەرکەوتووی سڕایەوە',
    deleteBackupFailed: 'سڕینەوەی پاشەکەوت سەرکەوتوو نەبوو',
    deleteBackupConfirm: 'دڵنیایت دەتەوێت ئەم پاشەکەوتە بسڕیتەوە؟',
    cloudAutoBackupEnabled: 'پاشەکەوتی ئەواری خۆکار چالاککرا',
    cloudAutoBackupDisabled: 'پاشەکەوتی ئەواری خۆکار ناچالاککرا',
    autoBackupSettingsFailed: 'نوێکردنەوەی ڕێکخستنی پاشەکەوتی خۆکار سەرکەوتوو نەبوو',
    userNotAuthenticated: 'بەکارهێنەر چوونەژوورەوە نەکردووە',
    accessDenied: 'دەستگەیشتن ڕەتکرایەوە',
    backupFileNotFound: 'فایلی پاشەکەوت نەدۆزرایەوە',
    failedToReadBackup: 'خوێندنەوەی فایلی پاشەکەوت سەرکەوتوو نەبوو',
    backupApiNotAvailable: 'API ی پاشەکەوت بەردەست نییە',
    failedToCreateBackup: 'دروستکردنی پاشەکەوت سەرکەوتوو نەبوو',
    cloudBackupIntro: 'چوونەژوورەوە بکە بۆ پاشەکەوت و گەڕاندنەوەی داتاکەت بە ئاسایش لە ئەواردا',
  },
  ar: {
    adminDashboard: 'لوحة الإدارة',
    todaysSales: 'مبيعات اليوم',
    totalRevenue: 'إجمالي الإيرادات',
    inventoryValue: 'قيمة المخزون',
    addProduct: 'إضافة منتج',
    backupNow: 'نسخ احتياطي الآن',
    settings: 'الإعدادات',
    products: 'المنتجات',
    name: 'الاسم',
    barcode: 'الباركود',
    price: 'السعر',
    stock: 'المخزون',
    quantity: 'الكمية',
    ram: 'الذاكرة',
    storage: 'التخزين',
    model: 'الموديل',
    sellingPrice: 'سعر البيع',
    buyingPrice: 'سعر الشراء',
    action: 'الإجراء',
    edit: 'تعديل',
    deleteProduct: 'حذف',
    salesHistory: 'سجل المبيعات',
    date: 'التاريخ',
    total: 'الإجمالي',
    view: 'عرض',
    addProductTitle: 'إضافة منتج',
    close: 'إغلاق',
    backupNowTitle: 'نسخ احتياطي الآن',
    settingsTitle: 'الإعدادات',
    changeAdminPassword: 'تغيير كلمة المرور',
    changePassword: 'تغيير كلمة المرور',
    currentPassword: 'كلمة المرور الحالية',
    newPassword: 'كلمة المرور الجديدة',
    confirmNewPassword: 'تأكيد كلمة المرور الجديدة',
    current: 'الحالية',
    new: 'الجديدة',
    confirm: 'تأكيد',
    change: 'تغيير',
    theme: 'المظهر',
    light: 'فاتح',
    dark: 'داكن',
    system: 'النظام',
    shopInfo: 'معلومات المتجر',
    shopName: 'اسم المتجر',
    address: 'العنوان',
    contact: 'الاتصال',
    save: 'حفظ',
    backupRestore: 'نسخ واستعادة',
    restore: 'استعادة',
    autoBackup: 'نسخ احتياطي تلقائي',
    googleDriveStatus: 'حالة Google Drive',
    connected: 'متصل',
    exportData: 'تصدير البيانات',
    exportSales: 'تصدير المبيعات (CSV)',
    exportInventory: 'تصدير المخزون (CSV)',
    lowStockAlerts: 'تنبيهات المخزون المنخفض',
    enableNotifications: 'تفعيل الإشعارات',
    threshold: 'الحد الأدنى (مثال 5)',
    printerSettings: 'إعدادات الطابعة',
    testPrint: 'اختبار الطباعة',
    receiptFormat: '(تنسيق الإيصال، اختيار الطابعة، إلخ)',
    dangerZone: 'منطقة الخطر',
    resetAllData: 'إعادة تعيين جميع البيانات',
    eraseWarning: 'سيتم حذف جميع بيانات المبيعات والمخزون. هذا الإجراء لا يمكن التراجع عنه!',
    aboutSupport: 'حول & الدعم',
    appVersion: 'إصدار POS 1.0.0',
    contactSupport: 'اتصل بالدعم',
    license: 'MIT License',
    language: 'اللغة',
    english: 'الإنجليزية',
    kurdish: 'الكردية (سوراني)',
    arabic: 'العربية',
    // Add extra keys for CRUD feedback
    productAdded: 'تمت الإضافة:',
    productUpdated: 'تم التحديث:',
    productDeleted: 'تم الحذف:',
    productArchived: 'تم الأرشفة:',
    addedToCart: 'أضيف إلى السلة:',
    confirmDelete: 'هل أنت متأكد أنك تريد حذف هذا المنتج؟',
    confirmReset: 'هل أنت متأكد أنك تريد إعادة تعيين جميع البيانات؟ لا يمكن التراجع عن هذا!',
    search: 'بحث...',
    cashier: 'الكاشير',
    scanOrEnter: 'أدخل أو امسح الباركود',
    add: 'إضافة',
    checkPrice: 'فحص السعر',
    returnItem: 'إرجاع منتج',
    noItems: 'لا توجد منتجات',
    items: 'منتجات',
    adminAccess: 'دخول المدير',
    adminPassword: 'كلمة مرور المدير',
    login: 'تسجيل الدخول',
    cancel: 'إلغاء',
    receiptPreview: 'معاينة الإيصال',
    productNotFound: 'المنتج غير موجود',
    confirmSale: 'هل أنت متأكد من إتمام هذا البيع؟',
    confirmDebtSale: 'هل أنت متأكد من تسجيل هذا البيع كدين؟',
    saleSuccess: 'تم إتمام البيع بنجاح!',
    saleFailed: 'فشل البيع',
    debtSaleSuccess: 'تم تسجيل بيع بالدين بنجاح!',
    saleApiUnavailable: 'واجهة البيع غير متاحة',
    belowBuyingPrice: 'أقل من سعر الشراء!',
    debts: 'الديون',
    totalProfit: 'إجمالي الربح',
    profit: 'الربح',
    searchCustomer: 'البحث باسم العميل...',
    noDebtsFound: 'لم يتم العثور على ديون لهذا البحث',
    markAsPaid: 'تحديد كمدفوع',
    paidAt: 'دُفع في',
    paymentTime: 'وقت الدفع',
    paymentTimeHelp: 'اتركه فارغاً لاستخدام الوقت الحالي',
    confirmMarkPaid: 'تحديد هذه المشتريات كمدفوعة؟ لا يمكن التراجع عن هذا.',
    debtMarkedPaid: 'تم تحديد الدين كمدفوع ونُقل إلى تاريخ المبيعات!',
    // Backup translations
    backupManager: 'مدير النسخ الاحتياطية',
    manualBackup: 'نسخ احتياطي يدوي',
    manualBackupDesc: 'إنشاء نسخة احتياطية من قاعدة البيانات إلى مجلد المستندات/Phone Shop Backups',
    autoBackupSystem: 'نسخ احتياطي تلقائي',
    autoBackupDesc: 'إنشاء نسخة احتياطية تلقائياً كل 24 ساعة',
    enableAutoBackup: 'تفعيل النسخ الاحتياطي اليومي التلقائي',
    createBackup: 'إنشاء نسخة احتياطية',
    creating: 'جاري الإنشاء...',
    backupSuccess: 'تم إنشاء النسخة الاحتياطية بنجاح!',
    backupFailed: 'فشل في إنشاء النسخة الاحتياطية',
    autoBackupSystemEnabled: 'تم تفعيل النسخ الاحتياطي التلقائي - سيتم إنشاء نسخة احتياطية كل 24 ساعة',
    autoBackupSystemDisabled: 'تم إلغاء تفعيل النسخ الاحتياطي التلقائي',
    autoBackupFailed: 'فشل في تغيير إعدادات النسخ الاحتياطية التلقائية',
    autoBackupActive: 'النسخ الاحتياطي التلقائي نشط. سيتم إنشاء النسخة التالية خلال 24 ساعة تقريباً.',
    restoreBackup: 'استعادة من النسخة الاحتياطية',
    restoreWarning: 'تحذير: الاستعادة من النسخة الاحتياطية ستستبدل جميع البيانات الحالية. لا يمكن التراجع عن هذا الإجراء.',
    selectBackupFile: 'اختيار ملف النسخة الاحتياطية',
    restoring: 'جاري الاستعادة...',
    confirmRestore: 'هل أنت متأكد من الاستعادة من هذه النسخة الاحتياطية؟ سيتم استبدال جميع البيانات الحالية!',
    restoreSuccess: 'تمت استعادة قاعدة البيانات بنجاح!',
    restoreFailed: 'فشلت الاستعادة',
    backupHistory: 'تاريخ النسخ الاحتياطية',
    noBackups: 'لم يتم العثور على نسخ احتياطية',
    fileName: 'اسم الملف',
    createdAt: 'تم الإنشاء في',
    type: 'النوع',
    status: 'الحالة',
    completed: 'مكتمل',
  },
};

const LocaleContext = createContext();

export function LocaleProvider({ children }) {
  const [lang, setLang] = useState(() => localStorage.getItem('lang') || 'en');
  const t = useMemo(() => translations[lang], [lang]);
  const isRTL = lang === 'ar' || lang === 'ku';
  const notoFont = lang === 'ku' ? { fontFamily: 'Noto Sans Arabic, Noto Naskh Arabic, Noto Sans Kurdish, Noto Sans, sans-serif' } : {};

  // Persist language
  React.useEffect(() => {
    localStorage.setItem('lang', lang);
  }, [lang]);

  return (
    <LocaleContext.Provider value={{ lang, setLang, t, isRTL, notoFont }}>
      {children}
    </LocaleContext.Provider>
  );
}

export function useLocale() {
  return useContext(LocaleContext);
}
